<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<title>ì ì‹¬ ë©”ë‰´ ë£°ë ›</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<style>
  :root { --size: 480px; }
  body{display:flex;flex-direction:column;align-items:center;gap:28px;min-height:100vh;font-family:system-ui,sans-serif;background:#f7f7f7;}
  #wheelBox{width:var(--size);height:var(--size);position:relative;}
  /* ê¸°ì¡´ #pointer ì„ ì–¸ì„ ì´ ì½”ë“œë¡œ êµì²´ */
  #pointer{
    position:absolute;
    /* ì‚¼ê°í˜•ì˜ ìœ—ë³€(=ë°‘ë³€)ì´ ë£°ë › í…Œë‘ë¦¬ì™€ ê²¹ì¹˜ê³ 
       ë¾°ì¡±í•œ ì•„ë˜ìª½ì´ ì› ì•ˆìœ¼ë¡œ ë“¤ì–´ì˜¤ë„ë¡ ì‚´ì§ ë‚´ë ¤ì¤ë‹ˆë‹¤. */
    top:-6px;                 /* ë” ê¹Šê²Œ ë„£ê³  ì‹¶ìœ¼ë©´ 0~ì–‘ìˆ˜ë¡œ ì¤„ì—¬ë³´ì„¸ìš” */
  
    left:50%;
    width:0;
    height:0;
  
    /* ì—­ì‚¼ê°í˜•: border-top ì„ ìƒ‰ì¹ í•˜ë©´ â†“ ë°©í–¥ */
    border-left:20px solid transparent;
    border-right:20px solid transparent;
    border-top:28px solid #ff5252;   /* ì›í•˜ëŠ” ìƒ‰ìƒ/í¬ê¸°ë¡œ ì¡°ì • ê°€ëŠ¥ */
  
    transform:translateX(-50%);
    z-index:10;
  }

  button{padding:12px 28px;font-size:1.1rem;border:none;border-radius:6px;background:#2196f3;color:#fff;cursor:pointer;}
  button:disabled{opacity:.5;cursor:not-allowed;}
  #result{font-size:1.2rem;font-weight:600;color:#ff5252;min-height:1.2em;}
</style>
</head>
<body>

<h1>ì˜¤ëŠ˜ ì ì‹¬ ë­ ë¨¹ì§€?</h1>

<div id="wheelBox">
  <div id="pointer"></div>
  <svg id="wheel" viewBox="-1 -1 2 2" style="width:100%;height:100%;"></svg>
</div>

<button id="spinBtn">ëŒë ¤!</button>
<p id="result"></p>

<script>
const menus = ["ê¹€ì¹˜ì°Œê°œ","ëˆê¹ŒìŠ¤","ì œìœ¡ë³¶ìŒ","ì§œì¥ë©´","ìŒ€êµ­ìˆ˜","ìƒëŸ¬ë“œ","ì´ˆë°¥","í–„ë²„ê±°"];
const wheel   = document.getElementById("wheel");
const spinBtn = document.getElementById("spinBtn");
const result  = document.getElementById("result");
const sliceDeg = 360 / menus.length;

/* --- íŒŒì´ ê·¸ë¦¬ê¸° & ê¸€ì”¨ ë°°ì¹˜ --- */
menus.forEach((label,i)=>{
  const start = i*sliceDeg, end=start+sliceDeg, largeArc=sliceDeg>180?1:0;
  const s = polar(start), e = polar(end);

  const p = docEl('path',{
    d:`M0 0 L${s.x} ${s.y} A1 1 0 ${largeArc} 1 ${e.x} ${e.y} Z`,
    fill:`hsl(${start+sliceDeg/2},70%,60%)`
  }); wheel.appendChild(p);

  const mid=start+sliceDeg/2, m=polar(mid,.55);
  const upright=a=>(a>90&&a<270)?a+180:a;
  const t = docEl('text',{
    x:m.x, y:m.y, 'text-anchor':'middle','alignment-baseline':'middle',
    fill:'#fff','font-size':'0.07px',              // â˜… ê¸€ì”¨ í¬ê¸° â†“ ì ˆë°˜
    transform:`rotate(${upright(mid)} ${m.x} ${m.y})`
  }, label);
  wheel.appendChild(t);
});

/* --- íšŒì „ --- */
spinBtn.addEventListener('click', ()=>{
  spinBtn.disabled = true;
  result.textContent = '';

  const pick         = Math.floor(Math.random() * menus.length);   // ê³ ë¥¼ ë©”ë‰´
  const sliceCenter  = 360 - pick * sliceDeg - sliceDeg / 2;       // 0~360 ëª©í‘œ ê°
  const nowMod360    = (gsap.getProperty(wheel, 'rotation') % 360 + 360) % 360;

  /* ìµœì†Œ 6ë°”í€´(=2160Â°) + ëª©í‘œ ì¹¸ê¹Œì§€ ì¶”ê°€ íšŒì „ëŸ‰ ê³„ì‚° */
  const extraSpins   = 10 * 360;
  const toTargetDiff = (sliceCenter - nowMod360 + 360) % 360;      // 0~359 ì–‘ìˆ˜
  const delta        = extraSpins + toTargetDiff;                  // ìµœì¢… ìƒëŒ€ íšŒì „ëŸ‰

  gsap.to(wheel,{
    rotation: "+=" + delta,        // â˜… ìƒëŒ€ íšŒì „(+=)ìœ¼ë¡œ ì „ë‹¬
    duration: 5,
    ease: 'power4.out',
    onComplete: () => {
      result.textContent = `ì˜¤ëŠ˜ ì ì‹¬ì€ ğŸ‘‰ ${menus[pick]} ğŸ‘ˆ`;
      spinBtn.disabled = false;
    }
  });
});

/* --- í—¬í¼ --- */
function polar(deg,r=1){const rad=(deg-90)*Math.PI/180;return{ x:r*Math.cos(rad), y:r*Math.sin(rad)};}
function docEl(tag,attrs={},txt){const el=document.createElementNS('http://www.w3.org/2000/svg',tag);for(const k in attrs)el.setAttribute(k,attrs[k]);if(txt)el.textContent=txt;return el;}
</script>
</body>
</html>
