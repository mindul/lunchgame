<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<title>ì ì‹¬ ë©”ë‰´ ë£°ë ›</title>

<!-- GSAP CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

<style>
  :root {
    --size: 480px;          /* ë£°ë › ì§€ë¦„ í•œ ë²ˆì— ë°”ê¾¸ë ¤ë©´ ì—¬ê¸°ë§Œ ìˆ˜ì • */
  }

  body{
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    gap:32px;
    min-height:100vh;
    font-family:system-ui, sans-serif;
    background:#f7f7f7;
  }
  #wheelBox{
    width:var(--size);
    height:var(--size);
    position:relative;
  }
  /* í™”ì‚´í‘œ(í¬ì¸í„°) */
  #pointer{
    position:absolute;
    top:-18px;
    left:50%;
    width:0;
    height:0;
    border-left:16px solid transparent;
    border-right:16px solid transparent;
    border-bottom:24px solid #ff5252;
    transform:translateX(-50%);
    z-index:10;
  }
  button{
    padding:12px 24px;
    font-size:1.1rem;
    border:none;
    border-radius:6px;
    background:#2196f3;
    color:#fff;
    cursor:pointer;
  }
  button:disabled{
    opacity:.6;
    cursor:not-allowed;
  }
</style>
</head>
<body>

<h1>ì˜¤ëŠ˜ ì ì‹¬ ë­ ë¨¹ì§€? ğŸ½ï¸</h1>

<div id="wheelBox">
  <div id="pointer"></div>

  <!-- SVG ë£°ë › (JSì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„±) -->
  <svg id="wheel" viewBox="-1 -1 2 2" style="width:100%;height:100%;transform:rotate(0deg);">
    <!-- slice <path>ë“¤ì´ ì—¬ê¸°ì— ì£¼ì… -->
  </svg>
</div>

<button id="spinBtn">ë£°ë › ëŒë¦¬ê¸°!</button>

<script>
/* 1) ë©”ë‰´ ëª©ë¡ë§Œ ë°”ê¾¸ë©´ ìë™ìœ¼ë¡œ ë£°ë ›ì´ ë‹¤ì‹œ ê·¸ë ¤ì§‘ë‹ˆë‹¤ */
const menus = ["ê¹€ì¹˜ì°Œê°œ", "ëˆê¹ŒìŠ¤", "ì œìœ¡ë³¶ìŒ", "ì§œì¥ë©´", "ìŒ€êµ­ìˆ˜", "ìƒëŸ¬ë“œ", "ì´ˆë°¥", "í–„ë²„ê±°"];

const wheel     = document.getElementById("wheel");
const spinBtn   = document.getElementById("spinBtn");
const sliceDeg  = 360 / menus.length;

/* 2) SVG íŒŒì´ ìŠ¬ë¼ì´ìŠ¤ì™€ ì¤‘ì•™ í…ìŠ¤íŠ¸ ë§Œë“¤ê¸° */
menus.forEach((label, i) => {
  const startAngle = i * sliceDeg;
  const endAngle   = startAngle + sliceDeg;
  const largeArc   = sliceDeg > 180 ? 1 : 0;

  /* í˜¸(arc)-ëì  ì¢Œí‘œ ê³„ì‚° (ë‹¨ìœ„: ë°˜ì§€ë¦„=1) */
  const start = polarToCartesian(startAngle);
  const end   = polarToCartesian(endAngle);

  /* íŒŒì´-ì¡°ê° path */
  const path = document.createElementNS("http://www.w3.org/2000/svg","path");
  path.setAttribute("d", [
    `M 0 0`,
    `L ${start.x} ${start.y}`,
    `A 1 1 0 ${largeArc} 1 ${end.x} ${end.y}`,
    `Z`
  ].join(" "));
  path.setAttribute("fill", `hsl(${startAngle+sliceDeg/2}, 70%, 60%)`);
  wheel.appendChild(path);

  /* ê°€ìš´ë° í…ìŠ¤íŠ¸(ì‚´ì§ ì•ˆìª½ì— ë°°ì¹˜) */
  const midAngle = startAngle + sliceDeg / 2;
  const mid      = polarToCartesian(midAngle, 0.55);   // ë°˜ì§€ë¦„ *0.55 ìœ„ì¹˜
  const text = document.createElementNS("http://www.w3.org/2000/svg","text");
  text.textContent = label;
  text.setAttribute("x", mid.x);
  text.setAttribute("y", mid.y);
  text.setAttribute("text-anchor","middle");
  text.setAttribute("alignment-baseline","middle");
  text.setAttribute("fill","#000");
  text.setAttribute("font-size","0.18px");             // SVG viewBox ê¸°ì¤€
  text.setAttribute("transform", `rotate(${midAngle} ${mid.x} ${mid.y})`);
  wheel.appendChild(text);
});

/* 3) íšŒì „ í•¨ìˆ˜ */
spinBtn.addEventListener("click", () => {
  spinBtn.disabled = true;

  const chosenIdx  = Math.floor(Math.random() * menus.length);
  const offsetDeg  = sliceDeg / 2; // ë£°ë › ìœ„ìª½ í¬ì¸í„°ê°€ slice ì¤‘ì•™ì„ ê°€ë¦¬í‚¤ë„ë¡ ë³´ì •
  const targetRot  = 360 * 6 + (360 - chosenIdx * sliceDeg - offsetDeg);

  gsap.to(wheel, {
    rotation: targetRot,
    duration: 5,
    ease: "power4.out",
    onComplete: () => {
      alert(`ì˜¤ëŠ˜ ì ì‹¬ì€ â¡ï¸ [ ${menus[chosenIdx]} ]! ğŸ˜‹`);
      spinBtn.disabled = false;
    }
  });
});

/* 4) ê°ë„â†’ì¢Œí‘œ ë³€í™˜ í—¬í¼ */
function polarToCartesian(angleDeg, radius = 1){
  const rad = (angleDeg - 90) * Math.PI / 180; // SVGëŠ” 12ì‹œ ë°©í–¥ë¶€í„° ì‹œê³„ë°©í–¥
  return { x: radius * Math.cos(rad), y: radius * Math.sin(rad) };
}
</script>
</body>
</html>
