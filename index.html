<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ì ì‹¬ë©”ë‰´ ë£°ë ›</title>
<style>
  :root {
    --size: 400px;           /* ë£°ë › ì§€ë¦„ */
    --border: 8px;           /* í…Œë‘ë¦¬ ë‘ê»˜ */
  }
  body {
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    height:100vh; margin:0; font-family:"Pretendard","Segoe UI",sans-serif;
    background:#f9fafc;
  }
  #wrapper           { position:relative; width:var(--size); height:var(--size); }
  #wheel             { width:100%; height:100%; transform:rotate(0deg); }      /* GSAPì´ íšŒì „ */
  #pointer           { position:absolute; top:-12px; left:50%; transform:translateX(-50%); 
                       width:0; height:0; border-left:14px solid transparent; 
                       border-right:14px solid transparent; border-bottom:26px solid #ff4757;}
  button             { margin-top:30px; padding:12px 32px; font-size:1.1rem; 
                       background:#1e90ff; color:#fff; border:0; border-radius:6px; cursor:pointer;}
  button:disabled    { opacity:.5; cursor:not-allowed; }
</style>
</head>
<body>

<div id="wrapper">
  <div id="pointer"></div>
  <!-- ë£°ë ›ì€ SVGë¡œ ê·¸ë¦¬ê¸° -->
  <svg id="wheel" viewBox="-200 -200 400 400"></svg>
</div>
<button id="spinBtn">Spin!</button>

<script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
<script>
/* 1) ë©”ë‰´ ì„¤ì • */
const menuItems = ["ëˆê¹ŒìŠ¤", "ë¼ë©´", "ê¹€ì¹˜ì°Œê°œ", "ì´ˆë°¥", "ìƒëŸ¬ë“œ", "í–„ë²„ê±°", "ë§ˆë¼íƒ•", "íŒŒìŠ¤íƒ€"];

/* 2) íŒŒì´ ì¡°ê° ê·¸ë¦¬ê¸° */
const wheel   = document.getElementById("wheel");
const slice   = 360 / menuItems.length;
const radius  = 200;             // viewBox ë°˜ì§€ë¦„

menuItems.forEach((label, i) => {
  const startAngle = slice * i - 90;            // SVG 12ì‹œ ë°©í–¥ì´ -90Â°
  const endAngle   = startAngle + slice;
  
  // í˜¸ì˜ ì‹œì‘Â·ëì ì„ ê·¹ì¢Œí‘œâ†’ì§êµì¢Œí‘œ ë³€í™˜
  const x1 = radius * Math.cos(startAngle*Math.PI/180);
  const y1 = radius * Math.sin(startAngle*Math.PI/180);
  const x2 = radius * Math.cos(endAngle*Math.PI/180);
  const y2 = radius * Math.sin(endAngle*Math.PI/180);
  
  // path(d) â€” M(0,0) L(x1,y1) A(rx ry 0 largeArc sweep x2 y2) Z
  const largeArc = slice > 180 ? 1 : 0;
  const pathData = `M0,0 L${x1},${y1} A${radius},${radius} 0 ${largeArc},1 ${x2},${y2} Z`;

  // slice ìƒ‰ìƒ íŒ”ë ˆíŠ¸ (HSLë¡œ ê°„ë‹¨íˆ ìƒì„±)
  const hue = (i * 360 / menuItems.length);
  const path = document.createElementNS("http://www.w3.org/2000/svg","path");
  path.setAttribute("d", pathData);
  path.setAttribute("fill", `hsl(${hue}, 80%, 60%)`);
  path.setAttribute("stroke", "#fff");
  path.setAttribute("stroke-width", "2");
  wheel.appendChild(path);

  // ë¼ë²¨ (ì¤‘ì•™ ê°ë„ì— í…ìŠ¤íŠ¸ ë°°ì¹˜)
  const textAngle = startAngle + slice/2;
  const tx = (radius*0.6) * Math.cos(textAngle*Math.PI/180);
  const ty = (radius*0.6) * Math.sin(textAngle*Math.PI/180);
  const txt = document.createElementNS("http://www.w3.org/2000/svg","text");
  txt.setAttribute("x", tx);
  txt.setAttribute("y", ty);
  txt.setAttribute("text-anchor","middle");
  txt.setAttribute("dominant-baseline","middle");
  txt.setAttribute("fill","#ffffff");
  txt.setAttribute("font-size","18");
  txt.setAttribute("transform",`rotate(${textAngle+90} ${tx} ${ty})`); // ê¸€ìë¥¼ ë°”ê¹¥ìª½ì„ í–¥í•˜ë„ë¡
  txt.textContent = label;
  wheel.appendChild(txt);
});

/* 3) íšŒì „ ë¡œì§ */
let spinning = false;
const btn = document.getElementById("spinBtn");
btn.addEventListener("click", () => {
  if (spinning) return;
  spinning = true; btn.disabled = true;
  
  /* ëœë¤ ëª©í‘œ ì¡°ê° ì„ íƒ */
  const targetIndex = Math.floor(Math.random() * menuItems.length);
  
  /* íšŒì „ê° ê³„ì‚°: ì—¬ëŸ¬ ë°”í€´ + íƒ€ê¹ƒ ì¤‘ì•™ ì •ë ¬ */
  const spins       = 5 + Math.floor(Math.random()*3);              // 5~7ë°”í€´
  const finalAngle  = spins*360 + (targetIndex * slice + slice/2);
  
  /* ì• ë‹ˆë©”ì´ì…˜ */
  gsap.to(wheel, {
    rotate: finalAngle,
    duration: 5,
    ease: "power4.out",
    onComplete: () => {
      const chosen = menuItems[targetIndex];
      alert(`ì˜¤ëŠ˜ì˜ ì ì‹¬ì€ ğŸ‘‰ ${chosen} ğŸ‘ˆ`);
      spinning = false; btn.disabled = false;
      /* ë‹¤ìŒ íšŒì „ ëŒ€ë¹„ ê°ë„ ì •ë¦¬ (í° ê°ë„ë¥¼ 0~360Â°ë¡œ ì¤„ì—¬ ë‘ë©´ ì„±ëŠ¥ â†‘) */
      gsap.set(wheel, {rotate: finalAngle % 360});
    }
  });
});
</script>
</body>
</html>
